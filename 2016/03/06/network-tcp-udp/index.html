<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="站在巨人的肩膀上，成就自我，成就他人。"><title>深入理解计算机网络之TCP与UDP | 派森</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">深入理解计算机网络之TCP与UDP</h1><a id="logo" href="/.">派森</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">深入理解计算机网络之TCP与UDP</h1><div class="post-meta">2016-03-06<span> | </span><span class="category"><a href="/categories/network/">network</a></span></div><div class="post-content"><p>IP首部中有一个协议字段，用来标识网络层（IP）的上一层是采用的哪一种传输协议。</p>
<p>源IP， 目标IP， 协议号， 源端口号， 目标端口号来唯一标识通信</p>
<h3 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h3><p>客户端向服务端发起请求，为什么要经过<strong>应用层</strong>（为用户的应用进程提供服务），<strong>运输层</strong>（负责向两个主机中进程之间的通信提供服务，主要使用TCP、UDP两种协议）、<strong>网络层</strong>（为分组交换网上的不同主机提供通信服务）、<strong>数据链路层</strong>（在两个相邻结点之间传送数据时，数据链路层将网络层交下来的IP数据报组装成帧，在两个相邻结点间的链路上，透明地传送帧中的数据）、<strong>物理层</strong>（透明地传送比特流）、一层一层地封装？</p>
<p>IP数据报的首部明确标志了这两个主机的IP地址。但真正通信的实体是在主机中的进程，严格来讲，两个主机通信就是两个主机中的应用进程互相通信。IP协议虽然能把分组送到目的主机，但是这个分组还停留在主机的网络层而没有交付给主机中的应用进程。<br>网络层是为主机之间提供逻辑通信，而运输层为应用进程之间提供端到端的逻辑通信，运输层还有一个重要的作用<strong>复用</strong>和<strong>分用</strong>。</p>
<p>复用—应用层所有的应用进程都可以通过运输层再传送到IP层。<br>分用—运输层从IP层收到数据后必须交付给指明的应用进程。</p>
<h3 id="User-Datagram-Protocol-RFC-768-。"><a href="#User-Datagram-Protocol-RFC-768-。" class="headerlink" title="User Datagram Protocol [RFC 768]。"></a>User Datagram Protocol <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc768">[RFC 768]</a>。</h3><p>UDP传送的数据单元称为<strong>用户数据报</strong>，UDP在传送数据之前不需要先建立连接。远地主机的运输层收到UDP报文后，不需要给出任何确认。<br>UDP的主要特点：</p>
<ol>
<li>UDP是无连接的。</li>
<li>UDP使用尽最大努力交付。</li>
<li>UDP是面向报文的。</li>
<li>UDP没有拥塞控制。</li>
<li>UDP支持一对一、一对多、多对一和多对多的交互通信。</li>
<li>UDP的首部开销小，只有8个字节，比TCP的20个字节的首部要短。</li>
</ol>
<p>UDP的首部格式由四个字段组成，每个字段的长度都是两个字节：</p>
<ol>
<li>源端口</li>
<li>目的端口</li>
<li>长度</li>
<li>检验和 </li>
</ol>
<p>UDP数据部分加上首部，传递给网络层，构成网络层的IP数据报的数据部分。<br>UDP用户数据报首部检验和，在UDP用户数据报之前增加12字节的<strong>伪首部</strong><br>UDP不保证连接的可靠性，存在丢包的情况，相较于TCP，简单，效率高。</p>
<h3 id="Transmission-Control-Protocol-RFC-793-。"><a href="#Transmission-Control-Protocol-RFC-793-。" class="headerlink" title="Transmission Control Protocol [RFC 793]。"></a>Transmission Control Protocol <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc793">[RFC 793]</a>。</h3><p>TCP最主要的特点：</p>
<ol>
<li>面向连接。</li>
<li>每一条TCP连接只能有两个端点，每一条TCP连接只能是点对点的。</li>
<li>TCP提供可靠交付的服务。也就是说，通过TCP连接传送的数据，无差错、不丢失、不重复、并且按序到达。</li>
<li>TCP提供全双工通信。</li>
<li>面向字节流。</li>
</ol>
<p>TCP通过检验和、序列号、确认应答、重发控制、连接管理以及窗口控制等机制实现可靠性传输。</p>
<p>TCP接的端点叫socket:<br><strong>socket = (IP:port)</strong><br>每一条TCP连接唯一地被通信两端的两个socket所确定。<br><strong>TCP连接 ::= {socket1, socket2}</strong></p>
<p>TCP传送的数据单位称为<strong>TCP报文段（segment）</strong>，在传送数据之前必须先建立连接（三次握手），数据传输结束后要释放连接（四次挥手）。<br>TCP是面向连接，提供可靠运输。<br>TCP是如何保证连接的可靠性的呢？<br>TCP通过三次握手建立连接  </p>
<hr>
<ol>
<li>转发器（Repeater） —&gt; 工作在 物理层</li>
<li>网桥 （Bridge） —&gt; 数据链路层</li>
<li>路由器 （Router） —&gt; 网络层</li>
<li>网关 （Gateway） —&gt; 网络层以上</li>
</ol>
<p>IP 地址：：= { &lt;网络号&gt;,&lt;主机号&gt; } </p>
<p>子网掩码</p>
<p>头一次面对一本难读的书的时候，从头到尾先读一遍，碰到不懂的地方不要停下来查询或思索。</p>
<p>针对不同的书，采取不同的阅读方法。</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2016/03/19/Laravel-PHP-Framework/">Laravel Modern PHP Framework</a><a class="next" href="/2016/02/28/write-something/">要提高执行力</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=1.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=1.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=1.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '7195b7bc418aac087afe',
  clientSecret: '23266ff1105683bc5cbf7657311b873ec53428e7',
  repo: 'junxxx.github.io',
  owner: 'junxxx',
  admin: ['junxxx'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://paisen.site"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ApacheBench/">ApacheBench</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-programing/">C programing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP-Framework/">PHP Framework</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Regular-Expression/">Regular Expression</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vim/">Vim</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/book/">book</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/code/">code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/file/">file</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/interviews/">interviews</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jekyll/">jekyll</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/month/">month</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/note/">note</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php-extension/">php extension</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/php-notes/">php notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/rpc/">rpc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/server/">server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/soft-design/">soft design</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/sorting-algorithm/">sorting algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/study/">study</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">tool</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/unix/">unix</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/week/">week</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/apue/" style="font-size: 15px;">apue</a> <a href="/tags/Microservice/" style="font-size: 15px;">Microservice</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/07/26/design-pattern/">Design pattern</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/07/26/yar-rpc-framework/">Yar RPC Framework</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/30/2020-Q1-work-summary-md/">2020-Q1-work-summary.md</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/07/csapp-notes-md/">csapp-notes.md</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/01/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1-md/">进程间通信.md</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/24/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/22/Go-kit/">Go-kit</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/02/22/web-architecture/">web-architecture</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/09/annual-summary/">2019-annual-summary</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/15/apue-advanced-IO/">apue-advanced-IO</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">派森.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>